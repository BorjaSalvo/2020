<!--Peter Fight-->
<!--09/05/2020-->
<!--HTML del componente que gestiona el registro de usuarios-->
<div class="card shadow-lg o-hidden border-0 ">
  <div class="card-body p-0">
    <div class="row">

      <!--      BLOQUE DERECHA-->
      <div class="col-lg-12" style="/*height: 100vh;*/">
        <div class="p-5">
          <div class="text-center">
            <h4 class="text-dark mb-4">Mis datos</h4>
          </div>
          <!--
          LISTADO DE ERRORES
          Lleva una animación de animate.css para la primera vez que se muestre
          -->
          <div *ngIf="errores?.length > 0" class="validation-summary alert alert-warning animated bounceIn" >
            <p>Por favor, corrije los siguientes errores:</p>
            <ul>
              <li *ngFor="let error of errores">
                {{error}}
              </li>
            </ul>
          </div>
          <!--
          FORMULARIO
          -->
          <form class="user" [formGroup]="datosFormulario" (ngSubmit)="onSubmit(datosFormulario.value)" >
            <div class="form-group row" >
              <label class="inputFile" >
                <input (change)="validacionDinamica(true)" type="file"  class="btn btn-outline-info" name="image" name="image" (change)="onFileChanged($event)"/>
                <span [ngClass]="{'ng-invalid':(filePreview == undefined  || filePreview.length == 0)}" >Selecciona una imagen de perfil</span>&nbsp;<span class="text-danger">*</span>
              </label>
              <div class="info text-center w-100" *ngIf="filePreview" >
                <img (change)="validacionDinamica(true)" style="border-radius: 50%" class="d-inline" width="100" height="100" [src]="sanitize(filePreview)"/>
              </div>
            </div>
            <div class="form-group row text-center">
              <div class="col-12 d-inline">
                <input readonly="readonly"   (change)="validacionDinamica()" formControlName="Email" [(ngModel)]="datosFormulario.Email" name="Email" class="col-11 float-left form-control form-control-user" type="email" id="Email" aria-describedby="emailHelp" placeholder="Correo electrónico..." name="email">
                <span class="text-danger col-1">*</span>
              </div>
            </div>
            <div class="form-group row">
              <div class="col-sm-6 mb-3 mb-sm-0">
                <input (change)="validacionDinamica()" formControlName="Nombre" [(ngModel)]="datosFormulario.Nombre" name="Nombre" class="col-10 float-left form-control form-control-user" type="text" id="Nombre" placeholder="Nombre..." name="first_name">
                &nbsp;<span class="text-danger float-left col-1">*</span>
              </div>
              <div class="col-sm-6">
                <input  (change)="validacionDinamica()" formControlName="Apellidos" [(ngModel)]="datosFormulario.Apellidos" name="Apellidos" class="col-10 float-left form-control form-control-user" type="text" id="Apellidos" placeholder="Apellidos..." name="last_name">
                &nbsp;<span class="text-danger float-left col-1">*</span>
              </div>
            </div>
            <span class="btn btn-outline-success float-right mb-4 mt-2" (click)="togglePass($event);">Deseo modificar el password</span>
            <div class="form-group row mt-3 d-none">
              <div class="col-sm-6 mb-3 mb-sm-0">
                <input  (change)="validacionDinamica()" formControlName="Password"  name="Password" class="col-10 float-left form-control form-control-user" type="password" id="Pasword" placeholder="Password..." name="password">
                &nbsp;<span class="text-danger float-left col-1">*</span>
              </div>
              <div class="col-sm-6">
                <input  (change)="validacionDinamica()" formControlName="RepitePassword"  name="RepitePassword" class="col-10 float-left form-control form-control-user" type="password" id="RepitePassword" placeholder="Repite el password..." name="password_repeat">
                &nbsp;<span class="text-danger float-left col-1">*</span>
              </div>
            </div>
            <button class="btn btn-primary btn-block text-white btn-user" type="submit">Modificar cuenta</button>
            <br>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
